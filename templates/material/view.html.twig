{% extends 'core/core.html.twig' %}

{% block main %}
    <section class="grid grid-cols-1 lg:grid-cols-3">
        <div class="flex justify-center lg:justify-start items-center">
            {% if material.type == 1 %}
                {% set materialPicto = 'build/images/sheet.svg' %}
            {% elseif material.type == 2 %}
                {% set materialPicto = 'build/images/roll.svg' %}
            {% endif %}

            {% if materialPicto is defined %}
                <img src="{{ asset(materialPicto) }}" width="80" height="80" />
            {% endif %}
        </div>

        <div class="flex items-center justify-center">
            <h1 class="text-3xl">{{ material.name }}</h1>
        </div>

        <p class="w-full flex justify-center lg:justify-end mt-4 lg:mt-0 items-center">
            {{ include('component/button/a_button.html.twig', {
                href: path('material_update', { id: material.id }),
                label: 'Modifier',
                class: 'mr-3',
                option: { icon: 'edit', type: 'info', rounded: true }
            }) }}

            {{ include('component/button/a_button.html.twig', {
                href: path('material_delete', { id: material.id }),
                label: 'Supprimer',
                option: { icon: 'trash', type: 'danger', rounded: true }
            }) }}
        </p>
    </section>

    <section
        class="
            rounded-xl
            bg-gray-100 drop-shadow-md
            mt-10 p-6 mx-auto
            max-w-screen-sm
        "
    >
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 mb-5">
            <div class="hidden lg:block"></div>

            <h2 class="text-2xl text-center sm:text-left lg:text-center">Formats</h2>

            <p class="w-full flex justify-center lg:justify-end mt-4 lg:mt-0">
                {{ include('component/button/a_button.html.twig', {
                    href: path('material_format_create', { materialId: material.id }),
                    label: 'Ajouter',
                    option: { icon: 'plus', rounded: true, size: 'small' }
                }) }}
            </p>
        </div>

        <ul class="w-full">
            {% for format in material.formats %}
                <li
                    class="
                        w-full
                        px-2 sm:px-4 py-2 mt-3
                        bg-white hover:bg-gray-50
                        rounded
                        text-center
                        transition ease-in-out duration-200
                        shadow-sm
                        flex items-center justify-between
                    "
                >
                    <div>{{ format.width }} X {{ format.height }} mm</div>

                    <div class="flex justify-end items-center">
                        {% if format.priority == 1 %}
                            {% set priorityColor = 'blue-200' %}
                        {% elseif format.priority == 2 %}
                            {% set priorityColor = 'gray-200' %}
                        {% elseif format.priority == 3 %}
                            {% set priorityColor = 'red-200' %}
                        {% endif %}
                        <div class="hidden sm:block text-sm rounded-full bg-{{ priorityColor }} py-0.5 px-2">
                            {{ format.priorityLabel }}
                        </div>

                        <div class="sm:hidden text-sm rounded-full bg-{{ priorityColor }} py-0 px-2">&nbsp;</div>

                        {{ include('component/button/a_button.html.twig', {
                            href: path('material_format_update', { materialId: material.id, id: format.id }),
                            class: 'ml-2 sm:ml-5',
                            option: { icon: 'edit', type: 'info' },
                        }) }}

                        {{ include('component/button/a_button.html.twig', {
                            href: '#',
                            option: { icon: 'trash', type: 'danger' },
                        }) }}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </section>
{% endblock %}
